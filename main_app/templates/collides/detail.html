{% extends 'base.html' %}
{% block content %}

<h1 class="center">Collide Details</h1>

<div class="row">
  <div class="col s8">
    <h3>Collide Host:</h3>
    <div class="card">
      <div class="card-content">
        <div class="card-title">
          <p>
            {{ collide.host.first_name }}
            {{ collide.host.last_name }}
          </p>
          <p>
            Rating:
            {{ collide.host.rating }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<hr><br>
{% if has_rsvpd %}
<p class="right">You have RSVP'd</p>
{% else %}
<div class="right">
  <form action="{% url 'add_rsvp' collide.id %}" method="POST">
    {% csrf_token %}
    {{ rsvp_form.as_p }}
    <input type="submit" value="RSVP" class="btn" style="background-color: #daad86">
  </form>
</div>
{% endif %}
{% if rsvps.count %}
  {% for rsvp in rsvps %}
  <div class="row">
    <div class="col s8">
      <div class="card">
        <div class="card-content">
          <div class="card-title">
            <p>
              {{ rsvp.attendee.first_name }}
              {{ rsvp.attendee.last_name }}
            </p>
            <p>
              Rating:
              {{ rsvp.attendee.rating__avg }}
            </p>
            <form action="{% url 'add_rating' rsvp.collide.id rsvp.attendee.id %}">
              {% csrf_token %}
              {{ rating_form.as_p }}
              <input type="submit" value="RATE" class="btn">
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
{% else %}
<h4 class="center">No Attendees Yet</h4>
{% endif %}
<script>
  const selectEl = document.getElementById('id_rating');
  M.FormSelect.init(selectEl);
</script>
{% endblock %}